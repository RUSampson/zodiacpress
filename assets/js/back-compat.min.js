var zpAddToCart=document.querySelector('.single_add_to_cart_button');zpAddToCart.setAttribute('disabled',!0),jQuery('form.cart').appendTo('#zp-submit-wrap');function zpGetOffset(){const a=jQuery('#zp-ajax-birth-data :input').serialize()+'&action=zp_tz_offset',b=new XMLHttpRequest;b.open('POST',zp_ajax_object.ajaxurl),b.setRequestHeader('Content-Type','application/x-www-form-urlencoded'),b.responseType='json',b.onload=function(){if(200===b.status&&b.response)if(b.response.error){zpRemoveError();var c=document.createElement('span');c.setAttribute('class','ui-state-error'),c.textContent=b.response.error,document.getElementById('zp-ajax-birth-data').appendChild(c)}else null!==b.response.offset_geo&&''!==b.response.offset_geo&&'false'!=b.response.offset_geo&&(zpRemoveError(),document.getElementById('zp-offset-wrap').style.display='block',document.getElementById('zp-offset-label').textContent=zp_ajax_object.utc+' ',document.getElementById('zp_offset_geo').value=b.response.offset_geo,document.getElementById('zp-form-tip').style.display='block',zpAddToCart.removeAttribute('disabled'))},b.send(a)}(function(a){a('#zp-fetch-birthreport').remove(),a('input[name=\'action\']').remove(),a('.single_add_to_cart_button').click(function(){a.ajax({url:zp_ajax_object.ajaxurl,type:'POST',data:{action:'zpsr_cart_item_form_data',zp_form_data:a('#zp-birthreport-form').serialize()},async:!1})}),a('#month, #day, #year, #hour, #minute').on('change',function(){var b=!this.options[this.selectedIndex].defaultSelected;b&&zpFieldsFilled()&&zpGetOffset()})})(jQuery);function zpFieldsFilled(){var a=['geo_timezone_id','zp_long_decimal','zp_lat_decimal','place','minute','hour','year','day','month'];for(var b of a){var c=document.getElementById(b);if(null===c)return!1;if(0===c.value.length||!c.value.trim())return!1}return!0}function zpRemoveError(){var a=document.querySelector('.ui-state-error');null!==a&&a.parentNode.removeChild(a)}
